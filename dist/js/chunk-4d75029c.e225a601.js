(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d75029c"],{"2b6d":function(e,t,a){"use strict";a("f751");var s=a("6b6c"),n=a("c276");function r(e){return Object(s["a"])({url:n["a"].ajaxFront+"POS/queryTradeOrderSum",method:"get",params:Object.assign({},e,{POS:!0})})}function i(e){return Object(s["a"])({url:n["a"].ajaxFront+"POS/queryTradeOrder",method:"get",params:Object.assign({},e,{POS:!0})})}function l(e){return Object(s["a"])({url:n["a"].ajaxFront+"POS/queryRefundOrder",method:"get",params:Object.assign({},e,{POS:!0})})}function c(e){return Object(s["a"])({url:n["a"].ajaxFront+"POS/queryPayOrder",method:"get",params:Object.assign({},e,{POS:!0})})}function o(e){return Object(s["a"])({url:n["a"].ajaxFront+"POS/cancelOrder",method:"get",params:Object.assign({},e,{POS:!0})})}function u(e){return Object(s["a"])({url:n["a"].ajaxFront+"POS/refund",method:"get",params:Object.assign({},e,{POS:!0})})}t["a"]={getTradeSumAmount:r,getTrade:i,getRefund:l,getPay:c,cancel:o,refund:u}},"48c8":function(e,t,a){"use strict";var s=a("c68f"),n=a.n(s);n.a},"4ad2":function(e,t,a){"use strict";a.r(t);var s,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-nav-bar",{staticClass:"bar-wrapper",attrs:{title:this.$route.meta.title,"left-arrow":"","z-index":999},on:{"click-left":e.navBackClick}}),a("div",{staticClass:"business_detail-wrapper container-wrapper",staticStyle:{"overflow-y":"auto"}},[a("div",{staticClass:"business_detail-container"},[a("div",{staticClass:"detail-item"},[a("div",{staticClass:"detail-item-name"},[e._v(e._s(e.businessInfo.tradeOrderName))]),a("div",{staticClass:"detail-item-title mt10"},[e._v("\n                    "+e._s(e._f("$_filters_moneyMark")(e.businessInfo.tradeType))+e._s(e._f("$_filters_moneyFormat_fen")(e.businessInfo.tradeAmount))+"\n                ")]),a("div",{staticClass:"detail-item-tip mt2"},[e._v(e._s(e.businessInfo.tradeStatusText))])]),a("div",{staticClass:"detail-cells plr16"},[a("div",{staticClass:"detail-cell"},[a("label",{staticClass:"detail-cell-label"},[e._v("交易类型")]),a("div",{staticClass:"detail-cell-right"},[a("span",{staticClass:"detail-cell-span"},[e._v(e._s("1"===e.businessInfo.tradeType?"消费":"0"===e.businessInfo.tradeType?"退款":""))])])]),e.businessInfo.discountAmount?a("div",{staticClass:"detail-cell"},[a("label",{staticClass:"detail-cell-label"},[e._v("优惠金额（元）")]),a("div",{staticClass:"detail-cell-right"},[a("span",{staticClass:"detail-cell-span"},[e._v(e._s(e._f("$_filters_moneyFormat_fen")(e.businessInfo.discountAmount)))])])]):e._e(),a("div",{staticClass:"detail-cell"},[a("label",{staticClass:"detail-cell-label"},[e._v("支付方式")]),a("div",{staticClass:"detail-cell-right"},[a("span",{staticClass:"detail-cell-span"},[e._v(e._s("alipay"===e.businessInfo.payType?"支付宝":"wx"===e.businessInfo.payType?"微信":"wm"===e.businessInfo.payType?"微脉":"-"))])])]),a("div",{staticClass:"detail-cell"},[a("label",{staticClass:"detail-cell-label"},[e._v("\n                        "+e._s("alipay"===e.businessInfo.payType?"支付宝":"wx"===e.businessInfo.payType?"微信":"wm"===e.businessInfo.payType?"微脉":"")+"订单号")]),a("div",{staticClass:"detail-cell-right"},[a("span",{staticClass:"detail-cell-span"},[e._v(e._s(e.businessInfo.tradeThirdNo||"-"))])])]),a("div",{staticClass:"detail-cell media"},[a("label",{staticClass:"detail-cell-label"},[e._v("支付流水号")]),a("div",{staticClass:"detail-cell-right"},[e.businessInfo.tradeOrderNo&&e.businessInfo.tradeOrderNo.length>30?a("span",{staticClass:"detail-cell-span"},[a("span",{staticClass:"detail-cell-span-text"},[e._v(e._s(e.businessInfo.tradeOrderNo))])]):a("span",{staticClass:"detail-cell-span"},[e._v("\n                            "+e._s(e.businessInfo.tradeOrderNo||"-"))])])]),a("div",{staticClass:"detail-cell"},[a("label",{staticClass:"detail-cell-label"},[e._v("操作人")]),a("div",{staticClass:"detail-cell-right"},[a("span",{staticClass:"detail-cell-span"},[e._v(e._s(e.businessInfo.operatorName||"-"))])])]),a("div",{staticClass:"detail-cell"},[a("label",{staticClass:"detail-cell-label"},[e._v("创建时间")]),a("div",{staticClass:"detail-cell-right"},[e.businessInfo.createTime?a("span",{staticClass:"detail-cell-span"},[e._v(e._s(e._f("$_filters_parseTime")(e.businessInfo.createTime)))]):a("span",{staticClass:"detail-cell-span"},[e._v("-")])])]),e.businessInfo.remark?a("div",{staticClass:"detail-cell media"},[a("label",{staticClass:"detail-cell-label"},[e._v("备注")]),a("div",{staticClass:"detail-cell-right"},[e.businessInfo.remark.length>30?a("span",{staticClass:"detail-cell-span"},[a("span",{staticClass:"detail-cell-span-text"},[e._v(e._s(e.businessInfo.remark))])]):a("span",{staticClass:"detail-cell-span"},[e._v("\n                            "+e._s(e.businessInfo.remark))])])]):e._e()]),"pay"===e.queryOrderType&&e.overdrawStatus?a("div",{staticClass:"overdraw-item plr16 ptb10"},[e._v("\n                已超过30天可退款时间，不可退款\n            ")]):e._e(),e.resultForm&&"0"===e.resultStatus?a("div",{staticClass:"overdraw-item plr16 ptb10 align-c"},[a("span",{staticClass:"info cursor",on:{click:function(t){e.primaryOrderAction()}}},[e._v("查看原订单")])]):e._e()]),a("div",{staticClass:"mt30 plr16"},[e.refundShow?a("button",{staticClass:"\n                     btn\n                     btn-block\n                     btn-ghost\n                     mb16\n                     ",class:e.isRefundStatus?"":"disabled",on:{click:function(t){e.refundAction()}}},[e._v("退款\n            ")]):e._e(),e.cancelShow?a("button",{staticClass:"\n                     btn\n                     btn-block\n                     btn-ghost\n                     mb16\n                     ",on:{click:function(t){e.cancelAction()}}},[e._v("撤销订单\n            ")]):e._e(),a("button",{staticClass:"\n                     btn\n                     btn-block\n                     btn-primary\n                     ",on:{click:function(t){e.ensureAction()}}},[e._v("确定\n            ")])])])],1)},r=[],i=a("be94"),l=(a("f751"),a("ade3")),c=(a("e7e5"),a("d399")),o=(a("f908"),a("b528")),u=(a("19de"),a("234f")),d=(a("93ac"),a("bb33")),f=(a("4b0a"),a("2bb1")),b=(a("7844"),a("5596")),m=(a("0653"),a("34e9")),p=(a("c194"),a("7744")),y=(a("c3a6"),a("ad06")),v=(a("81e6"),a("9ffb")),O=(a("5f1a"),a("a3e2")),h=(a("cadf"),a("551c"),a("097d"),a("6b14")),g=a("2b6d"),C=a("c1df"),_=a.n(C),T=a("3f43"),S={components:(s={},Object(l["a"])(s,O["a"].name,O["a"]),Object(l["a"])(s,v["a"].name,v["a"]),Object(l["a"])(s,y["a"].name,y["a"]),Object(l["a"])(s,p["a"].name,p["a"]),Object(l["a"])(s,m["a"].name,m["a"]),Object(l["a"])(s,b["a"].name,b["a"]),Object(l["a"])(s,f["a"].name,f["a"]),Object(l["a"])(s,d["a"].name,d["a"]),Object(l["a"])(s,u["a"].name,u["a"]),Object(l["a"])(s,o["a"].name,o["a"]),Object(l["a"])(s,"Toast",c["a"]),s),data:function(){return Object.assign(h["a"].call(this),{queryOrder:{orderNo:""},queryOrderType:"",businessInfo:{tradeStatusText:"",tradeOrderName:"",tradeAmount:"",tradeType:this.$route.query.tradeType,discountAmount:"",tradeOrderNo:"",operatorName:"",createTime:"",remark:"",tradeThirdNo:""},refundShow:!1,isRefundStatus:!1,cancelShow:!1,operLimitStatus:!1,overdrawStatus:!1,resultForm:!1,resultStatus:void 0,primaryNo:""})},created:function(){this.queryOrder.orderNo=this.$route.query.tradeOrderNo,this.queryOrderType="1"===this.$route.query.tradeType?"pay":"0"===this.$route.query.tradeType?"refund":"",this.getOrderDetail(),this.resultForm=this.$route.query.resultForm||!1,this.$route.query.resultForm&&(this.resultStatus=this.$route.query.resultStatus)},methods:{getOrderDetail:function(){"pay"===this.queryOrderType&&this.getPayDetail(),"refund"===this.queryOrderType&&this.getRefundDetail()},getPayDetail:function(){var e=this;g["a"].getPay({payOrderNo:this.queryOrder.orderNo}).then(function(t){if(!0!==!t.success){if(e.businessInfo=Object(i["a"])({},e.businessInfo,{tradeOrderName:t.data.payOrderName||"",tradeAmount:t.data.buyerPayAmount||"",discountAmount:t.data.discountAmount||"",tradeOrderNo:t.data.payOrderNo||"",operatorName:t.data.operName||"",createTime:t.data.createTime||"",remark:t.data.paySubmitRemark||"",tradeStatusText:Object(T["b"])(t.data.payOrderStatus)}),t.data.items)for(var a in t.data.items)if(t.data.items[a].payType){e.businessInfo.payType=Object(T["c"])(t.data.items[a].payType),e.businessInfo.tradeThirdNo=t.data.items[a].settleNo;break}if("2"===t.data.payOrderStatus||2===t.data.payOrderStatus?(e.refundShow=!0,"0"===t.data.refundStatus||0===t.data.refundStatus||""===t.data.refundStatus||null===t.data.refundStatus?e.isRefundStatus=!1:e.isRefundStatus=!0):e.refundShow=!1,t.data.createTime){var s=_()(t.data.createTime).valueOf()+2592e6,n=_()(new Date).valueOf();e.overdrawStatus=s<n}}else e.businessInfo={}}).catch(function(){e.businessInfo={}})},getRefundDetail:function(){var e=this;g["a"].getRefund({refundOrderNo:this.queryOrder.orderNo}).then(function(t){if(!0!==!t.success){if(e.businessInfo=Object(i["a"])({},e.businessInfo,{tradeOrderName:t.data.payOrderName||"",tradeAmount:t.data.buyerPayAmount||"",discountAmount:t.data.discountAmount||"",tradeOrderNo:t.data.payOrderNo||"",operatorName:t.data.operName||"",createTime:t.data.createTime||"",remark:t.data.paySubmitRemark||"",tradeStatusText:Object(T["b"])(t.data.payOrderStatus),payType:Object(T["c"])(t.data.payType)}),t.data.items)for(var a in t.data.items)if(t.data.items[a].payType){e.businessInfo.payType=Object(T["c"])(t.data.items[a].payType),e.businessInfo.tradeThirdNo=t.data.items[a].settleNo;break}e.resultForm&&"0"===e.resultStatus&&(e.primaryNo=t.data.payOrderNo)}else e.businessInfo={}}).catch(function(){e.businessInfo={}})},refundAction:function(){var e=this;setTimeout(function(){e.$router.push({name:"businessRefund",query:{tradeOrderNo:e.$route.query.tradeOrderNo,amount:e.businessInfo.tradeAmount,tradeType:e.$route.query.tradeType}})},800)},cancelAction:function(){var e=this;g["a"].cancel({payOrderNo:this.queryOrder.orderNo}).then(function(t){!0!==!t.success||e.$toast(t.data.msg||"撤销订单失败")}).catch(function(){e.$toast("撤销订单失败")})},ensureAction:function(){this.navBackClick()},primaryOrderAction:function(){var e=this;setTimeout(function(){e.$router.push({name:"businessDetail",query:{tradeOrderNo:e.primaryNo,tradeType:"1"}})},800)},navBackClick:function(){var e=this;setTimeout(function(){e.$router.push({name:"business",query:{date:e.$route.query.date,orderStatusStr:e.$route.query.orderStatusStr}})},800)}}},j=S,N=(a("48c8"),a("2877")),k=Object(N["a"])(j,n,r,!1,null,"3c27429e",null);k.options.__file="business-detail.vue";t["default"]=k.exports},"6b14":function(e,t,a){"use strict";t["a"]=function(){return{}}},b258:function(e,t,a){},be94:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var s=a("ade3");function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Object(s["a"])(e,t,a[t])})}return e}},c68f:function(e,t,a){},d399:function(e,t,a){"use strict";var s=a("1988"),n=a("2b0e"),r=a("a142"),i=a("6605"),l=a("ad06"),c=a("543e"),o=Object(r["h"])("toast"),u=o[0],d=o[1],f=["success","fail","loading"],b=u({mixins:[i["a"]],props:{className:null,forbidClick:Boolean,message:[String,Number],type:{type:String,default:"text"},loadingType:{type:String,default:"circular"},position:{type:String,default:"middle"},lockScroll:{type:Boolean,default:!1}},data:function(){return{clickable:!1}},mounted:function(){this.toggleClickale()},destroyed:function(){this.toggleClickale()},watch:{value:function(){this.toggleClickale()},forbidClick:function(){this.toggleClickale()}},methods:{toggleClickale:function(){var e=this.value&&this.forbidClick;if(this.clickable!==e){this.clickable=e;var t=e?"add":"remove";document.body.classList[t]("van-toast--unclickable")}}},render:function(e){var t=this,a=this.type,s=this.message,n=-1!==f.indexOf(a)?"default":a,i=function(){switch(n){case"text":return e("div",[s]);case"html":return e("div",{domProps:{innerHTML:s}});default:return["loading"===a?e(c["a"],{attrs:{color:"white",type:t.loadingType}}):e(l["a"],{class:d("icon"),attrs:{name:a}}),Object(r["c"])(s)&&e("div",{class:d("text")},[s])]}};return e("transition",{attrs:{name:"van-fade"}},[e("div",{directives:[{name:"show",value:this.value}],class:[d([n,this.position]),this.className]},[i()])])}}),m={type:"text",mask:!1,value:!0,message:"",className:"",onClose:null,duration:3e3,position:"middle",forbidClick:!1,loadingType:"circular",getContainer:"body",overlayStyle:null},p=function(e){return Object(r["d"])(e)?e:{message:e}},y=[],v=!0,O=Object(s["a"])({},m);function h(){if(r["e"])return{};if(!y.length||!v){var e=new(n["a"].extend(b))({el:document.createElement("div")});y.push(e)}return y[y.length-1]}function g(e){return e.overlay=e.mask,e}function C(e){void 0===e&&(e={});var t=h();return e=Object(s["a"])({},O,p(e),{clear:function(){if(t.value=!1,e.onClose&&e.onClose(),!v&&!r["e"]){clearTimeout(t.timer),y=y.filter(function(e){return e!==t});var a=t.$el.parentNode;a&&a.removeChild(t.$el),t.$destroy()}}}),Object(s["a"])(t,g(e)),clearTimeout(t.timer),e.duration>0&&(t.timer=setTimeout(function(){t.clear()},e.duration)),t}var _=function(e){return function(t){return C(Object(s["a"])({type:e},p(t)))}};["loading","success","fail"].forEach(function(e){C[e]=_(e)}),C.clear=function(e){y.length&&(e?(y.forEach(function(e){e.clear()}),y=[]):v?y[0].clear():y.shift().clear())},C.setDefaultOptions=function(e){Object(s["a"])(O,e)},C.resetDefaultOptions=function(){O=Object(s["a"])({},m)},C.allowMultiple=function(e){void 0===e&&(e=!0),v=!e},C.install=function(){n["a"].use(b)},n["a"].prototype.$toast=C;t["a"]=C},e7e5:function(e,t,a){"use strict";a("68ef"),a("4d75"),a("b258")}}]);
//# sourceMappingURL=chunk-4d75029c.e225a601.js.map