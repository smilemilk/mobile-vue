(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fc48748"],{"222c":function(t,a,e){"use strict";var n=e("84e0"),i=e.n(n);i.a},"2e87":function(t,a,e){"use strict";e("cadf"),e("551c"),e("097d");a["a"]=function(){return{loginRule:[0,0],loginRuleText:["请输入金额"],loginInputStatus:[0,0],loginStatus:!0,loginRuleTextStatus:!1,departName:"",departList:"",accountList:[],remarkShow:!1,amount:"",remark:""}}},4917:function(t,a,e){e("214f")("match",1,function(t,a,e){return[function(e){"use strict";var n=t(this),i=void 0==e?void 0:e[a];return void 0!==i?i.call(e,n):new RegExp(e)[a](String(n))},e]})},"6fdd":function(t,a,e){"use strict";e("f751");var n=e("6b6c"),i=e("c276");function s(t){return Object(n["a"])({url:i["a"].ajaxFront+"XiMai/createOrder",method:"get",params:Object.assign({},t,{XiMai:!0})})}function o(t){return Object(n["a"])({url:i["a"].ajaxFront+"XiMai/queryPayOrder",method:"get",params:Object.assign({},t,{XiMai:!0})})}function r(t){return Object(n["a"])({url:i["a"].ajaxFront+"XiMai/cancelOrder",method:"get",params:Object.assign({},t,{XiMai:!0})})}a["a"]={createOrder:s,queryOrder:o,cancelOrder:r}},"84e0":function(t,a,e){},b3c9:function(t,a,e){"use strict";e.r(a);var n,i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("van-nav-bar",{staticClass:"bar-wrapper",attrs:{title:this.$route.meta.title,"left-arrow":"","z-index":999},on:{"click-left":t.navBackClick}}),e("div",{staticClass:"cashier-wrapper container-wrapper"},[e("div",{staticClass:"cashier-inner"},[e("div",{staticClass:"item pb3",class:1===this.loginInputStatus[0]?"bB1":""},[e("div",{staticClass:"item-label"},[t._v("输入金额（元）")]),e("div",{staticClass:"cashier-input"},[e("div",{staticClass:"flex-content flex-content-align"},[e("div",{staticClass:"cashier-input-unit mr4"},[t._v("￥")]),e("input",{directives:[{name:"model",rawName:"v-model",value:this.amount,expression:"this.amount"}],staticClass:"item-input amount-input",class:t.cursorStatus?"cursor":"",attrs:{maxlength:"9",placeholder:"0.00"},domProps:{value:this.amount},on:{focus:function(a){t.keyFocus()},input:function(a){a.target.composing||t.$set(this,"amount",a.target.value)}},nativeOn:{touchstart:function(a){a.stopPropagation(),t.keyboardShow=!0}}})]),e("p",{directives:[{name:"show",rawName:"v-show",value:0===this.loginRule[0]&&!0===this.loginRuleTextStatus,expression:"this.loginRule[0] === 0 &&\n                           this.loginRuleTextStatus === true"}],staticClass:"item-notice"},[t._v("不能为空")])])]),e("div",{staticClass:"font-n-l mt10"},[t._v("请仔细确认输入金额是否与商品价格一致")]),e("div",{staticClass:"mt20"},[t.remarkShow?e("div",{staticClass:"item pt0",class:1===this.loginInputStatus[1]?"bB1":""},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],staticClass:"item-input",staticStyle:{width:"100%"},attrs:{placeholder:"请输入收款备注"},domProps:{value:t.remark},on:{input:function(a){a.target.composing||(t.remark=a.target.value)}}})]):e("div",[e("span",{staticClass:"font-n-b",on:{click:function(a){t.remarkToggleHandle()}}},[t._v("添加备注")])])])]),e("div",{staticClass:"plr16"},[e("button",{staticClass:"\n                     btn\n                     btn-block\n                     btn-primary\n                     mt14",class:this.btnStatus?"":"btn-disabled",on:{click:function(a){t.submitAction()}}},[t._v("确定\n            ")])]),e("van-number-keyboard",{attrs:{show:t.keyboardShow,"extra-key":".","close-button-text":"完成"},on:{blur:function(a){t.keyboardShow=!1},input:t.onInput,delete:t.onDelete}})],1)],1)},s=[],o=(e("28a5"),e("4917"),e("e7e5"),e("d399")),r=(e("f751"),e("ade3")),u=(e("5246"),e("6b41")),c=(e("8fec"),e("7bd9")),l=(e("f908"),e("b528")),h=(e("19de"),e("234f")),m=(e("93ac"),e("bb33")),d=(e("4b0a"),e("2bb1")),b=(e("7844"),e("5596")),f=(e("0653"),e("34e9")),p=(e("c194"),e("7744")),g=(e("c3a6"),e("ad06")),v=(e("81e6"),e("9ffb")),O=(e("5f1a"),e("a3e2")),S=(e("cadf"),e("551c"),e("097d"),e("2e87")),k=e("6fdd"),j=e("3ddc"),w={components:(n={},Object(r["a"])(n,O["a"].name,O["a"]),Object(r["a"])(n,v["a"].name,v["a"]),Object(r["a"])(n,g["a"].name,g["a"]),Object(r["a"])(n,p["a"].name,p["a"]),Object(r["a"])(n,f["a"].name,f["a"]),Object(r["a"])(n,b["a"].name,b["a"]),Object(r["a"])(n,d["a"].name,d["a"]),Object(r["a"])(n,m["a"].name,m["a"]),Object(r["a"])(n,h["a"].name,h["a"]),Object(r["a"])(n,l["a"].name,l["a"]),Object(r["a"])(n,"NumberKeyboard",c["a"]),Object(r["a"])(n,"NavBar",u["a"]),n),data:function(){return Object.assign(S["a"].call(this),{keyboardShow:!0,btnStatus:!1,cursorStatus:!1})},created:function(){1==this.keyboardShow&&0==this.amount.length&&(this.cursorStatus=!0)},watch:{amount:function(t,a){if(t){if(this.cursorStatus=!t,this.loginRule[0]=1,this.btnStatus=1*t>0,this.remark?this.loginStatus=!0:this.loginStatus=!1,Math.floor(1*t)>1e5)return this.btnStatus=!1,Object(o["a"])("可输入的最大金额为100,000"),void(this.amount=a)}else this.btnStatus=!1,this.loginRule[0]=0,this.btnStatus=!1;t!==a?(this.loginInputStatus[0]=1,this.loginInputStatus[1]=0):this.loginInputStatus[0]=0},remark:function(t,a){if(this.loginRule[1]=t?1:0,t!==a?(this.loginInputStatus[0]=0,this.loginInputStatus[1]=1):this.loginInputStatus[1]=0,Object(j["a"])(t+"")>100)return this.remark=a,void Object(o["a"])("备注在100个字符之内")}},methods:{submitAction:function(){if(!1===this.btnStatus)return this.amount||Object(o["a"])("请输入收款金额"),void(Math.floor(this.amount)>1e5&&Object(o["a"])("可输入的最大金额为100,000"));if("1,1"===this.loginRule.join()||"1,0"===this.loginRule.join()){this.loginStatus=!0,this.loginRuleTextStatus=!1;var t=o["a"].loading({mask:!0,message:"请等待..."});this.createOrderFetch(t)}else this.loginStatus=!1,this.loginRuleTextStatus=!0},createOrderFetch:function(t){var a=this;k["a"].createOrder({orderId:Math.floor(900*Math.random())+100+""+(new Date).valueOf(),payOrderType:"xxsk",payAmount:parseFloat(100*this.amount).toFixed(0),remark:this.remark,deadTime:5}).then(function(e){if(t.clear(),!0!==!e.success)if(e.data){var n=e.data.match(/payOrderNo=(\S*)/)[1],i={amount:a.amount,payOrderNo:n||"",code:e.data||""};setTimeout(function(){a.$router.push({name:"cashierCode",query:i})},800)}else Object(o["a"])(e.msg||"收款创建失败");else Object(o["a"])(e.msg||"收款创建失败")}).catch(function(){t.clear(),Object(o["a"])("收款创建失败")})},remarkToggleHandle:function(){this.remarkShow=!0},onInput:function(t){"."===t&&(this.amount+"").indexOf(".")>-1||("0"!==t&&0!==t||this.amount+""!=="0")&&(this.amount+""==="0"&&"."!==t||(this.amount+"").indexOf(".")>-1&&(this.amount+"").split(".")[1].length>1||(this.amount=this.amount+(t+"")))},onDelete:function(){(this.amount+"").length>0&&(this.amount=this.amount.substring(0,this.amount.length-1),this.amount?this.cursorStatus=!1:this.cursorStatus=!0)},keyFocus:function(){this.keyboardShow=!0,document.activeElement.blur()},navBackClick:function(){var t=this;setTimeout(function(){t.$router.push({name:"home"})},800)}}},x=w,y=(e("222c"),e("2877")),C=Object(y["a"])(x,i,s,!1,null,"7abab9f0",null);C.options.__file="index.vue";a["default"]=C.exports}}]);
//# sourceMappingURL=chunk-7fc48748.808eeb22.js.map