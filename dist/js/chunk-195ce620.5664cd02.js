(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-195ce620"],{"01e0":function(t,e,a){},"02f4":function(t,e,a){var r=a("4588"),n=a("be13");t.exports=function(t){return function(e,a){var i,s,o=String(n(e)),c=r(a),d=o.length;return c<0||c>=d?t?"":void 0:(i=o.charCodeAt(c),i<55296||i>56319||c+1===d||(s=o.charCodeAt(c+1))<56320||s>57343?t?o.charAt(c):i:t?o.slice(c,c+2):s-56320+(i-55296<<10)+65536)}}},2994:function(t,e,a){"use strict";a("68ef"),a("c0c2")},"2b6d":function(t,e,a){"use strict";a("f751");var r=a("6b6c"),n=a("c276");function i(t){return Object(r["a"])({url:n["a"].ajaxFront+"POS/queryTradeOrderSum",method:"get",params:Object.assign({},t,{POS:!0})})}function s(t){return Object(r["a"])({url:n["a"].ajaxFront+"POS/queryTradeOrder",method:"get",params:Object.assign({},t,{POS:!0})})}function o(t){return Object(r["a"])({url:n["a"].ajaxFront+"POS/queryRefundOrder",method:"get",params:Object.assign({},t,{POS:!0})})}function c(t){return Object(r["a"])({url:n["a"].ajaxFront+"POS/queryPayOrder",method:"get",params:Object.assign({},t,{POS:!0})})}function d(t){return Object(r["a"])({url:n["a"].ajaxFront+"POS/cancelOrder",method:"get",params:Object.assign({},t,{POS:!0})})}function u(t){return Object(r["a"])({url:n["a"].ajaxFront+"POS/refund",method:"get",params:Object.assign({},t,{POS:!0})})}e["a"]={getTradeSumAmount:i,getTrade:s,getRefund:o,getPay:c,cancel:d,refund:u}},"2bdd":function(t,e,a){"use strict";var r=a("a142"),n=a("543e"),i=a("db78"),s=a("023d"),o=Object(r["h"])("list"),c=o[0],d=o[1],u=o[2];e["a"]=c({model:{prop:"loading"},props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,immediateCheck:{type:Boolean,default:!0},offset:{type:Number,default:300}},mounted:function(){this.scroller=Object(s["b"])(this.$el),this.handler(!0),this.immediateCheck&&this.$nextTick(this.check)},destroyed:function(){this.handler(!1)},activated:function(){this.handler(!0)},deactivated:function(){this.handler(!1)},watch:{loading:function(){this.$nextTick(this.check)},finished:function(){this.$nextTick(this.check)}},methods:{check:function(){if(!(this.loading||this.finished||this.error)){var t=this.$el,e=this.scroller,a=Object(s["d"])(e);if(a&&"none"!==window.getComputedStyle(t).display&&null!==t.offsetParent){var r=Object(s["c"])(e),n=r+a,i=!1;if(t===e)i=e.scrollHeight-n<this.offset;else{var o=Object(s["a"])(t)-Object(s["a"])(e)+Object(s["d"])(t);i=o-a<this.offset}i&&(this.$emit("input",!0),this.$emit("load"))}}},clickErrorText:function(){this.$emit("update:error",!1),this.$nextTick(this.check)},handler:function(t){this.binded!==t&&(this.binded=t,(t?i["b"]:i["a"])(this.scroller,"scroll",this.check))}},render:function(t){return t("div",{class:d()},[this.slots(),this.loading&&t("div",{class:d("loading"),key:"loading"},[this.slots("loading")||[t(n["a"],{class:d("loading-icon")}),t("span",{class:d("loading-text")},[this.loadingText||u("loading")])]]),this.finished&&this.finishedText&&t("div",{class:d("finished-text")},[this.finishedText]),this.error&&this.errorText&&t("div",{on:{click:this.clickErrorText},class:d("error-text")},[this.errorText])])}})},4145:function(t,e,a){"use strict";function r(t){var e="";return 0===arguments.length?null:void 0===t||null===t?"":(e="0"===t||0===t?"待支付":"8"===t||8===t?"订单关闭":"-1"===t?"有退款":"",e)}function n(t){var e="";return 0===arguments.length?null:void 0===t||null===t?"":(e="",e)}a.d(e,"a",function(){return r}),a.d(e,"b",function(){return n})},"5df3":function(t,e,a){"use strict";var r=a("02f4")(!0);a("01f9")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=r(e,a),this._i+=t.length,{value:t,done:!1})})},"673f":function(t,e,a){"use strict";var r=a("01e0"),n=a.n(r);n.a},be94:function(t,e,a){"use strict";a.d(e,"a",function(){return n});var r=a("ade3");function n(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),n.forEach(function(e){Object(r["a"])(t,e,a[e])})}return t}},c0c2:function(t,e,a){},cb72:function(t,e,a){"use strict";a.r(e);var r,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-nav-bar",{staticClass:"bar-wrapper",attrs:{title:this.$route.meta.title,"left-arrow":"","z-index":999},on:{"click-left":t.navBackClick}}),a("div",{staticClass:"dailyKnots-wrapper container-wrapper white",staticStyle:{overflow:"auto"}},[a("div",{staticClass:"panel-item flex-content flex-content-align flex-content-spaceBetween"},[a("div",{staticClass:"panel-item-select",class:[t.orderStatusShow?"panel-item-select_down":"",t.orderStatusActive?"active":""],on:{click:function(e){t.orderStatusToggleHandle()}}},[t._v(t._s(t.orderStatusText)+"\n            ")]),a("div",{on:{click:function(e){t.orderHistoryAction()}}},[a("i",{staticClass:"icon-search"}),t._v("\n                搜索\n            ")])]),t.orderStatusShow?a("div",{staticClass:"panel-downContainer"},[a("ul",{staticClass:"panel-downBody"},t._l(t.orderStatusList,function(e,r){return a("li",{key:e.key,staticClass:"panel-downBody-item flex-content flex-content-align flex-content-justify",class:e.key===t.orderSelected?"active":"",style:5===r?{visibility:"hidden"}:{},on:{click:function(a){t.orderStatusChooseHandle(e.key)}}},[t._v(t._s(e.value)+"\n                ")])})),a("button",{staticClass:"\n                     btn\n                     btn-block\n                     btn-primary\n                     mt10",on:{click:function(e){t.orderStatusAction()}}},[t._v("确定\n            ")])]):t._e(),a("div",{staticClass:"interval-item flex-content flex-content-align flex-content-spaceBetween"},[a("div",{staticClass:"date-select-box",on:{click:function(e){t.dateChangeAction()}}},[a("span",[t._v(t._s(t._f("$_filters_parseDate")(this.dateSearch)))]),a("i",{staticClass:"icon-triangle-dark ml5"})]),this.orderList&&this.orderList.length>0&&0==this.queryOrder.orderStatus.length?a("div",{},[a("div",{staticClass:"font-xs-l"},[t._v("实收 "),this.orderSumAmount.total?a("span",[t._v("￥"+t._s(t._f("$_filters_moneyFormat_fen")(t.orderSumAmount.total)))]):t._e(),a("span",{staticClass:"ml20"},[t._v("收入 "),this.orderSumAmount.in?a("span",[t._v("￥"+t._s(t._f("$_filters_moneyFormat_fen")(t.orderSumAmount.in)))]):t._e()])]),a("div",{staticClass:"font-xs-l flex-content flex-content-end"},[t._v("退款 "),this.orderSumAmount.out?a("span",[t._v("￥"+t._s(t._f("$_filters_moneyFormat_fen")(t.orderSumAmount.out)))]):t._e()])]):t._e()]),this.orderList&&this.orderList.length>0?a("div",{staticClass:"set-form cell-group"},[a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[a("van-list",{attrs:{finished:t.finished,"finished-text":t.loadingText,offset:t.offset},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(this.orderList,function(e,r){return a("div",{key:r,staticClass:"cell",on:{click:function(a){t.orderDetailAction(e.tradeOrderNo||"",e.tradeType||"")}}},[a("div",{staticClass:"cell-inner flex-content flex-content-spaceBetween",staticStyle:{"min-height":"102px"}},[a("div",{staticClass:"flex-content flex-content-top"},[a("i",{staticClass:"icon-payType mr10",class:"wx"===e.payType?"icon-payType_wx":"alipay"===e.payType?"icon-payType_alipay":(e.payType,"icon-payType_wm")}),a("div",[a("div",{staticClass:"font-n-d"},[t._v(t._s(e.tradeOrderName))]),e.payType?a("div",{staticClass:"font-s-d mt10 text-ellipsis"},[t._v("\n                                        "+t._s("alipay"===e.payType?"支付宝":"wx"===e.payType?"微信":"wm"===e.payType?"微脉":"")+"订单号:"),e.tradeThirdNo?a("span",[t._v(t._s(e.tradeThirdNo))]):t._e()]):t._e(),a("div",{staticClass:"font-s-d text-ellipsis",class:!e.payType||"alipay"!==e.payType&&"wx"!==e.payType?"mt10":""},[t._v("\n                                        支付流水号:"),e.tradeOrderNo?a("span",[t._v(t._s(e.tradeOrderNo))]):t._e()]),e.tradeTime?a("div",{staticClass:"time"},[t._v("\n                                        "+t._s(t._f("$_filters_parseTime_hour")(e.tradeTime))+"\n                                    ")]):t._e()])]),a("div",{staticClass:"cell-right"},[a("div",{staticClass:"font-l-d",staticStyle:{position:"absolute",top:"16px",right:"0"}},[(e.tradeAmount+"").indexOf("+")<=-1&&(e.tradeAmount+"").indexOf("-")<=-1?a("span",[t._v("\n                                    "+t._s(t._f("$_filters_moneyMark")(e.tradeType))+"\n                                ")]):t._e(),t._v("\n                                    "+t._s(t._f("$_filters_moneyFormat_fen")(e.tradeAmount))+"\n                                ")]),a("div",{staticClass:"font-s-b mt4 align-r",class:"订单关闭"===e.status?"gray":"待支付"===e.status?"orange":"",staticStyle:{position:"absolute",bottom:"16px",right:"0"}},[t._v(t._s(e.status)+"\n                                ")])])])])}))],1)],1):a("div",{staticClass:"order-none-container"},[t._m(0)]),a("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:t.dateTimePickerStatus,callback:function(e){t.dateTimePickerStatus=e},expression:"dateTimePickerStatus"}},[t.dateTimePickerStatus?a("van-datetime-picker",{attrs:{type:"date","min-date":t.minDate,"max-date":t.maxDate,"item-height":34},on:{change:t.dateTimeChangeAction,cancel:t.dateTimeCancelAction,confirm:t.dateTimeConfirmAction},model:{value:t.dateSearch,callback:function(e){t.dateSearch=e},expression:"dateSearch"}}):t._e()],1)],1)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"prompt-item prompt_small"},[a("i",{staticClass:"prompt-img noneFound"}),a("div",{staticClass:"font-l-d align-c mt14"},[t._v("还没有交易记录哦！")])])}],s=(a("ac6a"),a("5df3"),a("be94")),o=(a("f751"),a("ade3")),c=(a("2994"),a("2bdd")),d=(a("ab71"),a("58e6")),u=(a("8a58"),a("e41f")),l=(a("d1cf"),a("ee83")),h=(a("f908"),a("b528")),f=(a("19de"),a("234f")),m=(a("93ac"),a("bb33")),p=(a("4b0a"),a("2bb1")),y=(a("7844"),a("5596")),v=(a("0653"),a("34e9")),O=(a("c194"),a("7744")),g=(a("c3a6"),a("ad06")),S=(a("81e6"),a("9ffb")),b=(a("5f1a"),a("a3e2")),_=(a("cadf"),a("551c"),a("097d"),function(){return{orderStatusList:[{value:"全部",key:"all"},{value:"交易成功",key:"success"},{value:"订单关闭",key:"close"},{value:"待支付",key:"wait"},{value:"退款",key:"refund"},{value:"",key:""}],dateSearch:"",orderList:[],orderSelected:"all"}}),T=a("2b6d"),x=a("c1df"),k=a.n(x),j=a("3f43"),C=a("4145"),w={components:(r={},Object(o["a"])(r,b["a"].name,b["a"]),Object(o["a"])(r,S["a"].name,S["a"]),Object(o["a"])(r,g["a"].name,g["a"]),Object(o["a"])(r,O["a"].name,O["a"]),Object(o["a"])(r,v["a"].name,v["a"]),Object(o["a"])(r,y["a"].name,y["a"]),Object(o["a"])(r,p["a"].name,p["a"]),Object(o["a"])(r,m["a"].name,m["a"]),Object(o["a"])(r,f["a"].name,f["a"]),Object(o["a"])(r,h["a"].name,h["a"]),Object(o["a"])(r,"DatetimePicker",l["a"]),Object(o["a"])(r,"Popup",u["a"]),Object(o["a"])(r,d["a"].name,d["a"]),Object(o["a"])(r,c["a"].name,c["a"]),r),data:function(){return Object.assign(_.call(this),{queryOrder:{orderStatus:"",startDate:"",endDate:"",tradeOrderNo:"",payOrderType:"xxsk",limit:20,page:1},orderStatusShow:!1,orderObject:{0:"待支付",2:"交易成功",8:"订单关闭",10:"有退款"},orderSumAmount:{total:"",in:"",out:""},dateTimePickerStatus:!1,minDate:"",maxDate:"",orderStatusText:"全部",orderStatusActive:!1,total:0,isLoading:!1,loading:!1,finished:!1,loadingText:"加载中…",offset:100})},created:function(){this.$route.query&&this.$route.query.date?this.dateSearch=new Date(this.$route.query.date.slice(0,4),1*this.$route.query.date.slice(4,6)-1,this.$route.query.date.slice(6,8)):this.dateSearch=new Date,this.$route.query&&this.$route.query.orderStatusStr&&(this.orderSelected=this.$route.query.orderStatusStr),this.minDate=new Date(2019,0,1),this.maxDate=new Date,this.queryOrder=Object(s["a"])({},this.queryOrder,{page:1,startDate:k()(this.dateSearch).format("YYYYMMDD")+"000000",endDate:k()(this.dateSearch).format("YYYYMMDD")+"235959"}),this.init(),this.getOrderSumAmount()},methods:{onRefresh:function(){var t=this;setTimeout(function(){t.total=0,t.queryOrder.page=0,t.init()},500)},init:function(){var t=this;t.queryOrder.page=1,t.total=0,Promise.all([t.getOrderList(t)]).then(function(e){e[0]&&(e[0].length<20&&(t.loadingText=""),t.isLoading=!1)}).catch(function(t){})},onLoad:function(){var t=this;setTimeout(function(){t.queryOrder.page=t.queryOrder.page+20,Promise.all([t.getOrderList(t)]).then(function(e){e[0]&&(alert(t.queryOrder.page),alert(t.total),t.isLoading=!1,t.queryOrder.page>=t.total&&(t.finished=!0,t.loadingText="没有更多数据"))}).catch(function(t){})},500)},getOrderList:function(t){var e=this;return t?new Promise(function(e,a){T["a"].getTrade(t.queryOrder).then(function(r){if(!0===!r.success)return t.orderList=[],t.total=0,a({});var n=[];return r.data.items.forEach(function(t){("1"===t.tradeType||1===t.tradeType)&&t.refundStatus.length>0&&(t.tradeOrderStatus="-1");var e=Object(s["a"])({},t,{payType:Object(j["c"])(t.payType),status:"1"===t.tradeType||1===t.tradeType?Object(C["a"])(t.tradeOrderStatus):"0"===t.tradeType||0===t.tradeType?Object(C["b"])(t.refundStatus):""});n.push(e)}),t.orderList=n,t.total=r.data.totalCount,e(n)}).catch(function(){return t.orderList=[],t.total=0,a({})})}):new Promise(function(t,a){T["a"].getTrade(e.queryOrder).then(function(a){if(!0===!a.success)return e.orderList=[],e.total=0,t(e.orderList);var r=[];return a.data.items.forEach(function(t){("1"===t.tradeType||1===t.tradeType)&&t.refundStatus.length>0&&(t.tradeOrderStatus="-1");var e=Object(s["a"])({},t,{payType:Object(j["c"])(t.payType),status:"1"===t.tradeType||1===t.tradeType?Object(C["a"])(t.tradeOrderStatus):"0"===t.tradeType||0===t.tradeType?Object(C["b"])(t.refundStatus):""});r.push(e)}),e.orderList=r,e.total=a.data.totalCount,t(r)}).catch(function(){return e.orderList=[],e.total=0,a({})})})},getOrderSumAmount:function(){var t=this;T["a"].getTradeSumAmount({startDate:this.queryOrder.startDate,endDate:this.queryOrder.endDate,orderStatus:"",tradeOrderNo:"",payOrderType:"xxsk"}).then(function(e){!0===!e.success||e.data&&(t.orderSumAmount=Object(s["a"])({},t.orderSumAmount,{total:e.data.tradeTotalAmount+""||"",out:e.data.tradeOutAmount+""||"",in:e.data.tradeInAmount+""||""}))}).catch(function(){})},orderStatusAction:function(){var t={all:"",success:"2",close:"8",wait:"0",refund:"10"},e={all:"全部",success:"交易成功",close:"订单关闭",wait:"待支付",refund:"退款"};this.orderStatusText=e[this.orderSelected],this.orderStatusActive=!0,this.queryOrder=Object(s["a"])({},this.queryOrder,{orderStatus:t[this.orderSelected],page:1}),this.orderStatusShow=!1,this.init()},orderStatusToggleHandle:function(){this.orderStatusShow=!this.orderStatusShow},orderStatusChooseHandle:function(t){this.orderSelected=t},orderHistoryAction:function(){var t=this;setTimeout(function(){t.$router.push({name:"businessSearch"})},800)},orderDetailAction:function(t,e){var a=this;setTimeout(function(){a.$router.push({name:"businessDetail",query:{tradeOrderNo:t,tradeType:e}})},800)},dateChangeAction:function(){this.dateTimePickerStatus=!0},dateTimeChangeAction:function(t){},dateTimeCancelAction:function(){this.dateTimePickerStatus=!1},dateTimeConfirmAction:function(t){this.dateSearch=t,this.dateTimePickerStatus=!1,this.queryOrder=Object(s["a"])({},this.queryOrder,{page:1,startDate:k()(this.dateSearch).format("YYYYMMDD")+"000000",endDate:k()(this.dateSearch).format("YYYYMMDD")+"235959"}),this.init(),0==this.queryOrder.orderStatus.length&&this.getOrderSumAmount()},navBackClick:function(){var t=this;setTimeout(function(){t.$router.push({name:"home"})},800)}}},A=w,D=(a("673f"),a("2877")),q=Object(D["a"])(A,n,i,!1,null,"144f7034",null);q.options.__file="index.vue";e["default"]=q.exports}}]);
//# sourceMappingURL=chunk-195ce620.5664cd02.js.map